(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{346:function(t,e,a){"use strict";a.r(e);var r=a(14),s=Object(r.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"csrf攻击"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#csrf攻击"}},[t._v("#")]),t._v(" CSRF攻击")]),t._v(" "),e("p",[t._v("CSRF 英文全称是 Cross-site request forgery，即“跨站请求伪造”。指的是用户点击链接打开攻击者的网站，攻击者利用用户目前的登录状态发起跨站请求。CSRF攻击可以以受害者名义发送请求。如发送邮件，盗取账号，购买商品，货币转账，修改受害者的网络配置等等。")]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("跨站请求")]),e("br"),t._v("\nCookie 中若有效顶级域名 + 二级域名相同则判断为同站，如 www.a.taobao.com 与 www.b.taobao.com 为同站")])]),t._v(" "),e("h2",{attrs:{id:"_1、常见攻击方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、常见攻击方式"}},[t._v("#")]),t._v(" 1、常见攻击方式")]),t._v(" "),e("ul",[e("li",[t._v("通过 img 标签的 src 属性自动发起 GET 请求")]),t._v(" "),e("li",[t._v("通过脚本自动提交一个表单")]),t._v(" "),e("li",[t._v("诱导用户点击链接发起 GET 请求")])]),t._v(" "),e("h2",{attrs:{id:"_2、防范"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、防范"}},[t._v("#")]),t._v(" 2、防范")]),t._v(" "),e("h3",{attrs:{id:"利用cookie的samesite属性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#利用cookie的samesite属性"}},[t._v("#")]),t._v(" 利用Cookie的SameSite属性")]),t._v(" "),e("p",[t._v("SameSite 属性可以选择以下三个值之一")]),t._v(" "),e("ul",[e("li",[t._v("Strict：浏览器完全禁止第三方请求携带Cookie")]),t._v(" "),e("li",[t._v("Lax：在 GET 方法提交表单或者 a 标签发送 GET 请求的情况下可以携带 Cookie")]),t._v(" "),e("li",[t._v("None：默认模式，请求会自动携带上 Cookie")])]),t._v(" "),e("h3",{attrs:{id:"验证来源站点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#验证来源站点"}},[t._v("#")]),t._v(" 验证来源站点")]),t._v(" "),e("p",[t._v("根据请求头中的 Origin 和 Referer 字段判断来源站点。\n但 Origin 和 Referer 值可以被修改，可靠性不高。")]),t._v(" "),e("h3",{attrs:{id:"csrf-token"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#csrf-token"}},[t._v("#")]),t._v(" CSRF Token")]),t._v(" "),e("p",[t._v("浏览器向服务器发送请求时，服务器生成一个字符串并将其植入到返回的页面中（放在head区域或者表单里面）。"),e("br"),t._v("\n浏览器向服务端发送请求时必须带上这个字符串，然后服务器来验证是否合法。\ntoken进行了加密（有日期等参数，其他人无法知道具体参数）")]),t._v(" "),e("blockquote",[e("p",[t._v("对于 GET 请求可以将 token 值作为请求的 url 参数"),e("br"),t._v('\n对于 POST 请求可以使用 <input type="hidden" name="csrftoken" value="tokenvalue">')])])])}),[],!1,null,null,null);e.default=s.exports}}]);