<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>【稿】 | ronn前端笔记</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="积累、整理的部分前端知识点个人笔记">
    
    <link rel="preload" href="/ronn-blog/assets/css/0.styles.06a6d11c.css" as="style"><link rel="preload" href="/ronn-blog/assets/js/app.9c3c00f9.js" as="script"><link rel="preload" href="/ronn-blog/assets/js/2.5fbe0391.js" as="script"><link rel="preload" href="/ronn-blog/assets/js/1.6ba70183.js" as="script"><link rel="preload" href="/ronn-blog/assets/js/57.2f8d8ff4.js" as="script"><link rel="prefetch" href="/ronn-blog/assets/js/10.0720960b.js"><link rel="prefetch" href="/ronn-blog/assets/js/11.32adc493.js"><link rel="prefetch" href="/ronn-blog/assets/js/12.6b9ed61d.js"><link rel="prefetch" href="/ronn-blog/assets/js/13.ebfb1f42.js"><link rel="prefetch" href="/ronn-blog/assets/js/14.3e65117c.js"><link rel="prefetch" href="/ronn-blog/assets/js/15.5304afab.js"><link rel="prefetch" href="/ronn-blog/assets/js/16.9ca9aae8.js"><link rel="prefetch" href="/ronn-blog/assets/js/17.3dbcb51f.js"><link rel="prefetch" href="/ronn-blog/assets/js/18.4c170722.js"><link rel="prefetch" href="/ronn-blog/assets/js/19.d8afd0ae.js"><link rel="prefetch" href="/ronn-blog/assets/js/20.10e47ab9.js"><link rel="prefetch" href="/ronn-blog/assets/js/21.0ad1d6a3.js"><link rel="prefetch" href="/ronn-blog/assets/js/22.b7c97fbe.js"><link rel="prefetch" href="/ronn-blog/assets/js/23.e4c6b72f.js"><link rel="prefetch" href="/ronn-blog/assets/js/24.b2836b63.js"><link rel="prefetch" href="/ronn-blog/assets/js/25.eaf3e439.js"><link rel="prefetch" href="/ronn-blog/assets/js/26.22371c23.js"><link rel="prefetch" href="/ronn-blog/assets/js/27.68006c3a.js"><link rel="prefetch" href="/ronn-blog/assets/js/28.951a9ee5.js"><link rel="prefetch" href="/ronn-blog/assets/js/29.85d4b635.js"><link rel="prefetch" href="/ronn-blog/assets/js/3.bc6bba9e.js"><link rel="prefetch" href="/ronn-blog/assets/js/30.794b0c51.js"><link rel="prefetch" href="/ronn-blog/assets/js/31.827b0ba5.js"><link rel="prefetch" href="/ronn-blog/assets/js/32.038744de.js"><link rel="prefetch" href="/ronn-blog/assets/js/33.cba059cc.js"><link rel="prefetch" href="/ronn-blog/assets/js/34.a2ba2bee.js"><link rel="prefetch" href="/ronn-blog/assets/js/35.b37896d5.js"><link rel="prefetch" href="/ronn-blog/assets/js/36.4e76155c.js"><link rel="prefetch" href="/ronn-blog/assets/js/37.dd4483fb.js"><link rel="prefetch" href="/ronn-blog/assets/js/38.cef7f997.js"><link rel="prefetch" href="/ronn-blog/assets/js/39.bff31c99.js"><link rel="prefetch" href="/ronn-blog/assets/js/4.45665f8a.js"><link rel="prefetch" href="/ronn-blog/assets/js/40.15863430.js"><link rel="prefetch" href="/ronn-blog/assets/js/41.8a7b3150.js"><link rel="prefetch" href="/ronn-blog/assets/js/42.dc61ee0f.js"><link rel="prefetch" href="/ronn-blog/assets/js/43.867289eb.js"><link rel="prefetch" href="/ronn-blog/assets/js/44.bf5f79dd.js"><link rel="prefetch" href="/ronn-blog/assets/js/45.94d38a22.js"><link rel="prefetch" href="/ronn-blog/assets/js/46.841b1e71.js"><link rel="prefetch" href="/ronn-blog/assets/js/47.498b65b9.js"><link rel="prefetch" href="/ronn-blog/assets/js/48.73be7347.js"><link rel="prefetch" href="/ronn-blog/assets/js/49.69230798.js"><link rel="prefetch" href="/ronn-blog/assets/js/5.7098d77a.js"><link rel="prefetch" href="/ronn-blog/assets/js/50.dcaa6d20.js"><link rel="prefetch" href="/ronn-blog/assets/js/51.74d55f98.js"><link rel="prefetch" href="/ronn-blog/assets/js/52.02bfdd9a.js"><link rel="prefetch" href="/ronn-blog/assets/js/53.c428271a.js"><link rel="prefetch" href="/ronn-blog/assets/js/54.0f32f1f7.js"><link rel="prefetch" href="/ronn-blog/assets/js/55.2b592242.js"><link rel="prefetch" href="/ronn-blog/assets/js/56.3a4909b7.js"><link rel="prefetch" href="/ronn-blog/assets/js/58.989d9693.js"><link rel="prefetch" href="/ronn-blog/assets/js/59.c814207f.js"><link rel="prefetch" href="/ronn-blog/assets/js/6.0c0a0f39.js"><link rel="prefetch" href="/ronn-blog/assets/js/60.2b0da027.js"><link rel="prefetch" href="/ronn-blog/assets/js/61.d9a627b8.js"><link rel="prefetch" href="/ronn-blog/assets/js/62.cbb0108a.js"><link rel="prefetch" href="/ronn-blog/assets/js/63.fcd53959.js"><link rel="prefetch" href="/ronn-blog/assets/js/64.50b2c131.js"><link rel="prefetch" href="/ronn-blog/assets/js/65.e436fe8e.js"><link rel="prefetch" href="/ronn-blog/assets/js/66.698c5ed2.js"><link rel="prefetch" href="/ronn-blog/assets/js/67.3ba33b22.js"><link rel="prefetch" href="/ronn-blog/assets/js/68.79ee2333.js"><link rel="prefetch" href="/ronn-blog/assets/js/69.b087cb18.js"><link rel="prefetch" href="/ronn-blog/assets/js/7.6a854e57.js"><link rel="prefetch" href="/ronn-blog/assets/js/70.8fcaae91.js"><link rel="prefetch" href="/ronn-blog/assets/js/vendors~docsearch.77260563.js">
    <link rel="stylesheet" href="/ronn-blog/assets/css/0.styles.06a6d11c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ronn-blog/" class="home-link router-link-active"><img src="/ronn-blog/animal_chara_computer_azarashi.png" alt="ronn前端笔记" class="logo"> <span class="site-name can-hide">ronn前端笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ronn-blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/ronn-blog/pages/base/JS基础/数据类型.html" class="nav-link">
  基础知识
</a></div><div class="nav-item"><a href="/ronn-blog/pages/code/" class="nav-link">
  代码原理
</a></div><div class="nav-item"><a href="http://www.ronn.top/blog/nihonngo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ronn-blog/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/ronn-blog/pages/base/JS基础/数据类型.html" class="nav-link">
  基础知识
</a></div><div class="nav-item"><a href="/ronn-blog/pages/code/" class="nav-link">
  代码原理
</a></div><div class="nav-item"><a href="http://www.ronn.top/blog/nihonngo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS实践</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue原理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML+CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>其他</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ronn-blog/pages/base/其他/稿.html" class="active sidebar-link">【稿】</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#响应式" class="sidebar-link">响应式</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#vnode" class="sidebar-link">vnode</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#template渲染" class="sidebar-link">template渲染</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#diff" class="sidebar-link">Diff</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#vue3" class="sidebar-link">VUE3</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#优化" class="sidebar-link">优化</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#webpack" class="sidebar-link">webpack</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#从输入url" class="sidebar-link">从输入url</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#esmodule、commonjs" class="sidebar-link">ESmodule、commonjs</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#缓存" class="sidebar-link">缓存</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#跨域" class="sidebar-link">跨域</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#观察者模式、发布订阅模式" class="sidebar-link">观察者模式、发布订阅模式</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#网络安全xss、csrf" class="sidebar-link">网络安全xss、csrf</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#node" class="sidebar-link">node</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#jwt" class="sidebar-link">jwt</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#小程序实现原理" class="sidebar-link">小程序实现原理</a></li><li class="sidebar-sub-header"><a href="/ronn-blog/pages/base/其他/稿.html#小程序生命周期" class="sidebar-link">小程序生命周期</a></li></ul></li><li><a href="/ronn-blog/pages/base/其他/hr面.html" class="sidebar-link">hr面</a></li><li><a href="/ronn-blog/pages/base/其他/项目 稿.html" class="sidebar-link">【项目 稿】</a></li><li><a href="/ronn-blog/pages/base/其他/实现.html" class="sidebar-link">【代码实现】</a></li><li><a href="/ronn-blog/pages/base/其他/题.html" class="sidebar-link">【题】</a></li><li><a href="/ronn-blog/pages/base/其他/Webpack基础.html" class="sidebar-link">Webpack基础</a></li><li><a href="/ronn-blog/pages/base/其他/TypeScript基础.html" class="sidebar-link">TypeScript基础</a></li><li><a href="/ronn-blog/pages/base/其他/Fetch与XMLHttpRequest.html" class="sidebar-link">Fetch 与 XMLHttpRequest</a></li><li><a href="/ronn-blog/pages/base/其他/CSS-BEM命名规范.html" class="sidebar-link">CSS-BEM命名规范</a></li><li><a href="/ronn-blog/pages/base/其他/全局执行上下文出栈时机.html" class="sidebar-link">全局执行上下文出栈时机</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="【稿】"><a href="#【稿】" class="header-anchor">#</a> 【稿】</h1> <h2 id="响应式"><a href="#响应式" class="header-anchor">#</a> 响应式</h2> <p>vue在初始化阶段会使用Object.defineProperty(Vue3为proxy)实现属性的响应式。其中get被触发时会进行依赖收集(get被触发，渲染时，对应数据属性的Dep里面，每个组件有个watcher对象)，等到数据更改触发set的时候会通知属性对应的依赖（watch）进行视图更新</p> <blockquote><ul><li>1、初始化时深度遍历计算开销大（vue get触发时），proxy针对对象进行监听，而不是对象属性的。Proxy访问到某个属性时再代理（get触发）</li> <li>2、无法检测到对象新增/删除属性（因此需要 Vue.set 与 Vue.delete方法）</li> <li>3、无法直接监听数组变化（长度变化和通过索引设置数组项），需要调用数组方法</li> <li>4、还可以监听 Map、Set、WeakSet、WeakMap 等数据结构
在 Vue3.0中采用了 ES6 的 Proxy 来代替 Object.defineProperty，解决了以上缺陷并提高了性能。</li></ul></blockquote> <h2 id="vnode"><a href="#vnode" class="header-anchor">#</a> vnode</h2> <p>vnode就是用js对象属性来描述dom节点，是对真实dom的抽象，Virtual Dom就是vnode节点为基础的树
使用虚拟dom原因一个是直接修改真实dom开销大，虚拟dom可以先让js在内存中进行大量操作，只将最后的结果保留进行dom操作，而不是频繁修改真实dom。能提高性能和渲染效率，开发者可以更专注于业务逻辑而不是dom操作，另外因为它以js对象为基础不依赖平台环境而，更容易进行跨平台开发
不过最近也有框架 Svelte 实现无虚拟dom</p> <h2 id="template渲染"><a href="#template渲染" class="header-anchor">#</a> template渲染</h2> <p>首先解析 用正则等方式解析模版形成ast
优化ast结构、标记静态节点
ast生成渲染函数，生成虚拟dom
首次渲染没有旧的虚拟dom，直接创建DOM插入到页面上</p> <h2 id="diff"><a href="#diff" class="header-anchor">#</a> Diff</h2> <p>用来对比得出两个 VNode 对象之间的差异。(传统两棵树做diff复杂度O(3))</p> <blockquote><ul><li>1、只比较同一层级 不跨级比较。降低了复杂度</li> <li>2、tag、key、isComment、data是否定义 都相同则认为是相同节点,tag不同直接删掉重建， 不深度比较</li></ul></blockquote> <p>两者都有子节点,而且子节点不一样会触发updateChildren,vNode和oldVnode的children索引从两端到中间移动开始进行比较。
如果没有匹配到会进行oldChildren遍历与start比较。如果仍没有成功的会插入start到dom中对应oldStart位置</p> <blockquote><ul><li>vue2 双端比较</li> <li>vue3 最长递增子序列（减少了移动）增加了静态标记，不会比较标记了静态节点的标签</li> <li>react仅右移</li></ul></blockquote> <h2 id="vue3"><a href="#vue3" class="header-anchor">#</a> VUE3</h2> <p>composition Api 更好的代码组织和逻辑复用，不会想mixins一样产生一些冲突的问题
全局 API 进行分块，支持treeshaking
响应式采用了proxy
diff算法优化
hoist static提升静态常量，元素静态节点提升到顶级作用域，cacheHandle 缓存事件；不用每次render重复执行
patchFlag 编译模板时动态节点做标记，区分不同类型，diff时可以区分静态节点和不同的动态节点
性能 体积</p> <p>fragment template内 不用一个容器
suspense 异步组件
toRef、toRefs 将响应式对象的属性转为ref对象。对象新增属性或解构赋值不能初始化需要用到
1、setup</p> <h2 id="优化"><a href="#优化" class="header-anchor">#</a> 优化</h2> <p>FP
FCP（First Contentful Paint）：首次内容绘制时间
LCP（Largest Contentful Paint）：最大内容绘制时间，用于记录视窗内最大的元素绘制的时间
TTI 可交互时间
FID 首次输入延迟
INP 从交互到下一次绘制的延时
CLS（Cumulative Layout Shift）：累计位移偏移</p> <p>用（babel-loader） include 或 exclude 来帮我们避免不必要的转译。node_modules
DllPlugin 处理第三方库（node_modules），这个依赖库不会跟着你的业务代码一起被重新打包，只有当依赖自身发生版本变化时才会重新打包
Happypack——将 loader 由单进程转为多进程；treeshaking删除冗余代码
gzip</p> <p>对图片进行优化，小图片使用base64，雪碧图等方式。使用压缩性能更好的webp等（服务端accept字段进行判断、加载webp尝试获取宽高）。
提前设置图片宽高、动态元素预留控件，减少回流重绘，体现在指标上也就是cls
lottie 动画设置静态 背景图，监听到加载完成的事件后再换成动画
spider-font
vue组件异步加载、路由懒加载</p> <p>重要图片预加载，link标签的rel=&quot;preload&quot;或者js Image对象
延迟、按需加载
优化长任务（WebWorker、requestIdlecallback、防抖节流）
lighthouse建议
性能监控
————————————————————————
使用 CDN
图片懒加载
组件、路由的异步加载
本地存储 localstorage
图片方面：小图片使用base64，雪碧图等方式；使用压缩性能更好的webp格式同时做好降级方案；spider-font进行字体压缩 提前设置图片宽高、减少回流重绘
webpack构建方面：exclude限定loader范围；DllPlugin把第三方库单独打包，只有依赖自身变化的时候重新打包；使用happypack或者thread-loader开启多进程并发打包；
speed-measure-webpack-plugin 发现babel-loader sass-loader耗时长，使用了thread-loader（放到线程池里实现多线程）和开启缓存cacheDirectory</p> <p>使用本地存储、懒加载、异步加载、减少回流重绘（集中dom操作、）</p> <h2 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h2> <p>模块打包、开发服务器、资源优化</p> <p>vite 开发环境利用浏览器对esmodule的支持，可以直接进行模块的按需加载，而不是先整体打包再进行加载；按需加载，不用编译全部相关依赖；利用了esbuild(go编写)
生产环境rollup；开箱即用、配置简单(内置了hmr、babel、PostCSS、vue、react支持等)；vite首屏和加载慢
生产环境rollup，使用ESM、体积小（polyfill）；
研发rolldown作为rollup的替代品，esmodule快不够成熟灵活（代码分割）、rollup成熟灵活但不够快（比起本地）</p> <p>Rollup基于ESM的，默认支持treeshaking 一般用于打包类库而不是程序，
webpack大而全、生态和兼容性好,可以打包任何资源</p> <p>webpack5：性能提升 更快构建更小体积、持久化缓存（存在磁盘而非内存中，不仅在一次构建中有效）、模块联邦、</p> <blockquote><ol><li>从配置文件和命令行中读取合并参数</li> <li>初始化compiler对象，加载插件，开始编译</li> <li>从配置中的entry入口文件出发，根据依赖递归地调用loader对模块进行编译</li> <li>根据入口和模块的依赖关系组装成chunk、再把chunk转化为bundle加入到输出列表</li> <li>根据配置确定路径和文件名，将文件写入系统中。</li> <li>以上过程中webpack会在特定时间点广播出事件，插件监听后运行特定的逻辑</li></ol></blockquote> <p>常用loader: style-loader、babel-loader、css-loader、less-loader、vue-loader
常用plugin: HtmlWebpackPlugin、MiniCssExtractPlugin、DllPlugin、Happypack  webpack-bundle-analyzer
speed measure</p> <p>treeshaking 依赖于esmodule语法在编译时加载，可以通过静态分析确定模块的依赖关系，标记出未使用的代码并将其剔除</p> <h2 id="从输入url"><a href="#从输入url" class="header-anchor">#</a> 从输入url</h2> <ol><li>构建请求</li> <li>查找强缓存</li> <li>dns查询,获取ip</li> <li>建立 TCP 连接</li> <li>发送 HTTP 请求</li> <li>解析HTML，构建 DOM 树</li> <li>解析 CSS ，生成 CSSOM 树</li> <li>合并 DOM 树和 CSS 规则，生成 render 树</li> <li>布局 render 树，负责各元素尺寸、位置的计算</li> <li>绘制 render 树，绘制页面像素信息</li> <li>将绘制的结果合成到屏幕上，以完成渲染。</li></ol> <p>CSS 不会阻塞 DOM 解析（link 在 head 中）
CSS 会阻塞 DOM 树的渲染（阻塞 render tree 的形成）</p> <h2 id="esmodule、commonjs"><a href="#esmodule、commonjs" class="header-anchor">#</a> ESmodule、commonjs</h2> <p>CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用。
CommonJS 模块是运行时加载，ES6 模块是编译时输出接口。
CommonJS 模块的require()是同步加载模块，ES6 模块的import命令是异步加载，有一个独立模块依赖的解析阶段。</p> <h2 id="缓存"><a href="#缓存" class="header-anchor">#</a> 缓存</h2> <img src="/ronn-blog/浏览器/缓存.webp"> <h2 id="跨域"><a href="#跨域" class="header-anchor">#</a> 跨域</h2> <p>两个url的host、port、protocal相同被视为同源，跨域发送的ajax请求会遭到拦截。JSONP、CORS、反向代理</p> <p>服务端设置 Access-Control-Allow-Origin 响应头就可以开启CORS，表示对应的origin可以访问资源
非简单请求发送options预检查请求</p> <p>【】非简单请求【】</p> <h2 id="观察者模式、发布订阅模式"><a href="#观察者模式、发布订阅模式" class="header-anchor">#</a> 观察者模式、发布订阅模式</h2> <p>观察者模式定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新</p> <p>发布者和订阅者之间不直接进行订阅事件和通知操作，而是通过一个事件中心进行间接的通信</p> <h2 id="网络安全xss、csrf"><a href="#网络安全xss、csrf" class="header-anchor">#</a> 网络安全xss、csrf</h2> <p>xss全名为跨站脚本攻击，攻击者在受害者的浏览器中执行恶意脚本，以获取受害者cookie或者监听行为之类的操作。比如通过评论区之类将输入恶意脚本保存到数据库、或者利用页面上依赖参数请求的动态元素让受害者点击链接。主要防范方式是前后端都对用户输入进行转义、过滤，设置Cookie为httponly,禁止js读取</p> <p>csrf即为跨站请求伪造，攻击者通过用户的登陆凭证，冒充用户发起请求。防范方式有csrf token、设置cookie的samesite属性为strict、敏感操作增加双重验证等</p> <h2 id="node"><a href="#node" class="header-anchor">#</a> node</h2> <h3 id="如何优化"><a href="#如何优化" class="header-anchor">#</a> 如何优化</h3> <p>使用redis缓存一些频繁访问的数据、监控
数据库批量操作
优化数据库设计、索引和查询
计算密集型的场景，创建线程</p> <h3 id="和koa"><a href="#和koa" class="header-anchor">#</a> 和koa</h3> <p>常用中间件 body-parser
express更成熟、社区和方案更庞大、callback风格
koa 中间件更灵活、async、await、更轻量级、按需引入</p> <h2 id="jwt"><a href="#jwt" class="header-anchor">#</a> jwt</h2> <p>session是将用户信息存储在服务端，硬件成本高，多服务器时需要通过缓存等方式同步，有跨域限制
而且jwt是客户端自行存储，token体积一般较大，请求数据量也会增大,如果泄漏密钥，用户信息会流失。
有严格管理用户信息的需求（保密、封禁）用session</p> <h2 id="小程序实现原理"><a href="#小程序实现原理" class="header-anchor">#</a> 小程序实现原理</h2> <p>基于双线程的，小程序的渲染层和逻辑层在不同线程
首屏
逻辑层js运行在沙盒环境中，限制了访问权限
wxml转化为js对象也就是虚拟DOM,
安全（阻止了直接操作dom、跳转页面等）、多线程不会guih和js引擎、阻塞，传递数据用setData</p> <h2 id="小程序生命周期"><a href="#小程序生命周期" class="header-anchor">#</a> 小程序生命周期</h2> <h3 id="应用生命周期"><a href="#应用生命周期" class="header-anchor">#</a> 应用生命周期</h3> <blockquote><ul><li>onLaunch	小程序初始化完成时触发，全局只触发一次</li> <li>onShow	小程序启动，或从后台进入前台显示时触发</li> <li>onHide	小程序从前台进入后台时触发</li> <li>onError	小程序发生脚本错误或 API 调用报错时触发</li> <li>onPageNotFound	小程序要打开的页面不存在时触发</li> <li>onUnhandledRejection()	小程序有未处理的 Promise 拒绝时触发</li> <li>onThemeChange	系统切换主题时触发</li></ul></blockquote> <h3 id="页面生命周期"><a href="#页面生命周期" class="header-anchor">#</a> 页面生命周期</h3> <blockquote><ul><li>onLoad	生命周期回调—监听页面加载	发送请求获取数据</li> <li>onShow	生命周期回调—监听页面显示	请求数据</li> <li>onReady	生命周期回调—监听页面初次渲染完成	获取页面元素（少用）</li> <li>onHide	生命周期回调—监听页面隐藏	终止任务，如定时器或者播放音乐</li> <li>onUnload	生命周期回调—监听页面卸载	终止任务</li></ul></blockquote> <h3 id="组件生命周期"><a href="#组件生命周期" class="header-anchor">#</a> 组件生命周期</h3> <blockquote><ul><li>created	生命周期回调—监听页面加载</li> <li>attached	生命周期回调—监听页面显示</li> <li>ready	生命周期回调—监听页面初次渲染完成</li> <li>moved	生命周期回调—监听页面隐藏</li> <li>detached	生命周期回调—监听页面卸载</li> <li>error	每当组件方法抛出错误时执行</li></ul></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ronn-blog/pages/base/HTML+CSS/bfc.html" class="prev">
        BFC
      </a></span> <span class="next"><a href="/ronn-blog/pages/base/其他/hr面.html">
        hr面
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/ronn-blog/assets/js/app.9c3c00f9.js" defer></script><script src="/ronn-blog/assets/js/2.5fbe0391.js" defer></script><script src="/ronn-blog/assets/js/1.6ba70183.js" defer></script><script src="/ronn-blog/assets/js/57.2f8d8ff4.js" defer></script>
  </body>
</html>
